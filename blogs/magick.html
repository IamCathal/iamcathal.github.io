<html>
<html lang="en"></html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@300;400;700&display=swap" rel="stylesheet">
    <link href="../static/stylesheets/stylesheet.css" rel="stylesheet" type="text/css">
    <link href="../static/stylesheets/blogstylesheet.css" rel="stylesheet" type="text/css">

    <link rel="apple-touch-icon" sizes="57x57" href="../static/favicons/apple-icon-57x57.webp">
    <link rel="apple-touch-icon" sizes="60x60" href="../static/favicons/apple-icon-60x60.webp">
    <link rel="apple-touch-icon" sizes="72x72" href="../static/favicons/apple-icon-72x72.webp">
    <link rel="apple-touch-icon" sizes="76x76" href="../static/favicons/apple-icon-76x76.webp">
    <link rel="apple-touch-icon" sizes="114x114" href="../static/favicons/apple-icon-114x114.webp">
    <link rel="apple-touch-icon" sizes="120x120" href="../static/favicons/apple-icon-120x120.webp">
    <link rel="apple-touch-icon" sizes="144x144" href="../static/favicons/apple-icon-144x144.webp">
    <link rel="apple-touch-icon" sizes="152x152" href="../static/favicons/apple-icon-152x152.webp">
    <link rel="apple-touch-icon" sizes="180x180" href="../static/favicons/apple-icon-180x180.webp">
    <link rel="icon" type="image/png" sizes="192x192" href="../static/favicons/android-icon-192x192.webp">
    <link rel="icon" type="image/png" sizes="32x32" href="../static/favicons/favicon-32x32.webp">
    <link rel="icon" type="image/png" sizes="96x96" href="../static/favicons/favicon-96x96.webp">
    <link rel="icon" type="image/png" sizes="16x16" href="../static/favicons/favicon-16x16.webp">
    <link rel="manifest" href="/manifest.json">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="msapplication-TileImage" content="images/ms-icon-144x144.webp">
    <meta name="theme-color" content="#ffffff">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script> 
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.4/tiny-slider.css">
    <!--[if (lt IE 9)]><script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.4/min/tiny-slider.helper.ie8.js"></script><![endif]-->

    <meta property="og:image" content="https://avatars0.githubusercontent.com/u/6561327?s=460&v=4" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://cathaloc.dev" />
    <meta property="og:title" content="Cathal O'Callaghan, Final year CS&IT NUIG" />
    <meta property="og:description" content="Personal website showcasing all of my past projects. Designed 100% by me" />

    <title>Cathal O'Callaghan</title>

</head>

<body>

    <div class="container mt-5">
        <div class="row">
            <div class="col">
                <div tabindex="1" class="col boxWithBorder pl-3" style="border-top-left-radius: 2rem; border-bottom-right-radius: 2rem;">
                    <div class="row justify-content-md-center pl-3 pr-3">
                        <h1 tabindex="1" style="font-weight: bold; font-size: 2.7rem;">Shrinking my site with magic(k)</h1>
                     </div>
    
                   
                     <div class="row pt-3">
                        <div class="col pl-5 pr-5">
                            <span style="font-weight: bold;">TLDR: </span> I used 
                            <a href="https://github.com/ImageMagick/ImageMagick">image magick</a> to convert all images to webp
                            format and downsized images that were only being displayed in small resolutions on the site which
                            brought the total static content payload used down to 2.1MB from 6.6MB originally 

                            <hr class="mt-2 mb-2" />
                            I'm not primarily a web developer so when I read comments in the past about websites with unreasonably
                            large payloads I didn't really pay much attention to them. It was only when my own internet connection
                            at home started to suffer when I realised how slow and poorly optimised my own site was with regards
                            to all of the content such as images and videos that it was loading. So right after I did a massive
                            overhaul of my I took on the task of slimming it down as much as I could. 

                            <br /><br />
                            As a reference all of the static content (images and videos) that were being in the beginning totalled
                            <span style="font-weight: bold">6.6MB</span> over 52 files. I often noticed that larger images like the 
                            background were the last to be fetched and that meant that the background was a blank white wall until 
                            that happened. Of course I could've just used some background-color tricks to smooth that out but it
                            conveyed the bigger issue of my bloated site. To get started I knew that in order to keep the content
                            that I was happy with and lower the total payload I'd have to resize and compress it to some degree
                            that I would be happy with the final payload size. 

                            <br /><br />

                            I got the idea to convert all my images to .webp format after reading a blog and thread on hackernews:
                            <a href="https://news.ycombinator.com/item?id=31010659">Webp is such a gfoated format</a> by sandyuraz.
                            Before I was using mostly png with a small amount of svg and even fewer jpg images. I used the mentioned
                            <a href="https://github.com/ImageMagick/ImageMagick">image magick</a> cli to convert all my content since
                            it was so easy. With <span class="code">magick file.png file.webp</span> I could convert a png into a webp
                            without any more configuration necessary. While the lossless functionality of PNGs are nice the compression
                            that webp applies is definitely not noticeable most of the time for smaller images.

                            <br /><br />

                            I don't have an exact figure for how effective this step was but from the few checks I made during converting
                            images nearly all came out looking nearly identical to their PNG originals at a fraction of the size. In 
                            addition to converting to webp for a fair few images I reduced its actual size significantly as I was using
                            them for tiny icons when the original sizes were often 400x500. This was slightly tedious and I didn't automate
                            the process and instead used <a href="https://www.photopea.com/">photopea</a>, an online photoshop clone to resize
                            the images as I'm quite used to the interface. The process for most images (that needed resizing) went like:
                            <ul>
                                <li>Drag the original PNG into photopea</li>
                                <li>Resize it to roughly 200x200 and export as PNG</li>
                                <li>Use magick to then convert this downsized PNG into webp</li>
                            </ul>

                            I left the few videos alone and for the gifs I utilised <a href="https://ezgif.com/optimize">ezgif</a> to cleverly 
                            shave down more and more bytes from each gif. It was very applied and wasn't automated but most of the time I was
                            able to make significant gains without sacrificing too much quality. The tricks that I applied mostly were reducing 
                            the color range available, removing every 3rd/4th frames and adding lossy compression until it became noticeable.

                            In the end all images and videos were reduced to a meer <span style="font-weight: bold">2.1MB</span>. Thats a 3.1x 
                            reduction. WOWZA. The quality of the images and videos from a users perspective barely even changed and the 
                            performance was greatly increased so I'd consider it a complete success.
                        </div>
                    </div>
                    

                </div>
            </div>
        </div>

    </div>

</body>

</html>